# 10장 객체지향 쿼리 언어
이 장에서 다루는 내용
* 객체지향 쿼리 소개
* JPQL
* Criteria
* QueryDSL
* 네이티브 SQL
* 객체지향 쿼리 심화
JPQL은 가장 중요한 객체지향 쿼리 언어다. JPA를 다루는 개발자라면 JPQL을 필수로 학습해야 한다.   
## 10.1 객체지향 쿼리 소개
jpql의 특징
* 테이블이 아닌 객체를 대상으로 검색하는 객체지향 쿼리다.
* SQL을 추상화해서 특정 데이터베이스 SQL에 의존하지 않는다.
### 10.1.1 jpql 소개
jpql은 엔티티 객체를 조회하는 객체지향 쿼리다.   
jpql은 SQL을 추상화해서 특정 데이터베이스 SQL에 의존하지 않는다.   
jpql은 sql보다 간결하다.   
### 10.1.2 Criteria 쿼리 소개
Criteria의 장점은 문자가 아닌 query.select(m).where(...)처럼 프로그래밍 코드로 JPQL을 작성할 수 있다는 점이다.   
Criteria는 복잡하고 장황하다. 코드도 한눈에 들어오지 않는다는 단점이 있다.   
### 10.1.3 QueryDSL
querydsl은 jpql 빌더 역할 을 한다.
### 10.1.4 네이티브 SQL 소개
sql을 직접 사용할 수 있는 기능이다.
### 10.2 JPQL
jqpl도 sql과 비슷하게 select, update, delete 문을 사용할 수 있다.
* 대소문자 구분
* 엔티티 이름
  * jpql에서 사용한 Member는 클래스 명이 아니라 엔티티 명이다. 엔티티 명은 @Entity(name = "xxx")로 지정할 수 있다.
* 별칭은 필수
  * JPQL은 별칭을 빌수로 사용해야 한다.

select 다음에 new 명령어를 사용하면 반환받을 클래스에 지정할 수 있는데 이 클래스의 생성자에 jpql조회 결과를 넘겨줄 수 있다.   
글로벌 로딩 전략은 될 수 있으면 지연 로딩을 사용하고 최적화가 필요하면 페치 조인을 적용하는 것이 효과적이다.   
페치 조인은 다음과 같은 한계가 있다.   
* 페치 조인 대상에는 별칭을 준 수 없다.
* 둘 이상의 컬렉션을 페치할 수 없다.
* 컬렉션을 페치 조인하면 페이징 API를 사용할 수 없다.
여러 테이블에서 필요한 필드들만 조회해서 DTO로 반환하는 것이 더 효과적일 수 있다.
#### 10.2.8 경로 표현식
jpql에서 사용하는 경로 표현식을 알아보고 경로 표현식을 통한 묵시적 조인도 알아보자.
경로 표현식의 용어 정리
* 상태 필드: 단순히 값을 저장하기 위한 필드
* 연관 필드: 연관관계를 위한 필드, 임베디드 타입 포함
  * 단일 값 연관 필드: @ManyToOne, @OneToOne, 대상이 엔티티
  * 컬렉션 값 연관 필드: @OneToMany, @ManyToMany, 대상이 컬렉션
* 상태 필드 경로
* 단일 값 연관 경로: 묵시적으로 내부 조인
* 컬렉션 값 연관 경로: 묵시적으로 내부 조인

